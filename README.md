# meteor-helpers-benchmark

Test meteor collection helper performance

## Prepare

Generate 10000 documents in both collections

```js
Meteor.call('generate', 10000)
```

## Sample test result

### Meteor Collection

Client

```js
Meteor.call('test1', 10, 100000)
```

Server

```js
I20200925-15:42:53.829(8)? benchmark "test1": repeat=10
I20200925-15:42:59.495(8)? loop 0 finished in 5665.648024082184ms
I20200925-15:43:01.898(8)? loop 1 finished in 2403.223554968834ms
I20200925-15:43:04.217(8)? loop 2 finished in 2318.280266046524ms
I20200925-15:43:07.159(8)? loop 3 finished in 2942.671534061432ms
I20200925-15:43:09.467(8)? loop 4 finished in 2306.897061944008ms
I20200925-15:43:12.189(8)? loop 5 finished in 2721.374454975128ms
I20200925-15:43:14.750(8)? loop 6 finished in 2561.366014957428ms
I20200925-15:43:17.290(8)? loop 7 finished in 2538.675570011139ms
I20200925-15:43:19.767(8)? loop 8 finished in 2476.8132940530777ms
I20200925-15:43:22.301(8)? loop 9 finished in 2532.050948023796ms
I20200925-15:43:22.301(8)? test1 all done
I20200925-15:43:22.304(8)? {
I20200925-15:43:22.304(8)?   count: 10,
I20200925-15:43:22.305(8)?   max: 5665.648024082184,
I20200925-15:43:22.305(8)?   min: 2306.897061944008,
I20200925-15:43:22.305(8)?   average: 2561.80695463717
I20200925-15:43:22.305(8)? }
```

### Meteor Collection with Helper

Client

```js
Meteor.call('test2', 10, 100000)
```

Server

```js
I20200925-15:43:24.073(8)? benchmark "test2": repeat=10
I20200925-15:43:26.688(8)? loop 0 finished in 2614.8557559251785ms
I20200925-15:43:29.589(8)? loop 1 finished in 2900.8979650735855ms
I20200925-15:43:32.373(8)? loop 2 finished in 2782.8164769411087ms
I20200925-15:43:34.837(8)? loop 3 finished in 2463.8478560447693ms
I20200925-15:43:37.337(8)? loop 4 finished in 2499.755586028099ms
I20200925-15:43:39.789(8)? loop 5 finished in 2451.888771057129ms
I20200925-15:43:42.289(8)? loop 6 finished in 2500.102880001068ms
I20200925-15:43:44.803(8)? loop 7 finished in 2513.8575319051743ms
I20200925-15:43:47.548(8)? loop 8 finished in 2744.058061003685ms
I20200925-15:43:50.196(8)? loop 9 finished in 2645.6926350593567ms
I20200925-15:43:50.196(8)? test2 all done
I20200925-15:43:50.196(8)? {
I20200925-15:43:50.197(8)?   count: 10,
I20200925-15:43:50.197(8)?   max: 2900.8979650735855,
I20200925-15:43:50.197(8)?   min: 2451.888771057129,
I20200925-15:43:50.197(8)?   average: 2595.623347863555
I20200925-15:43:50.197(8)? }
```

### Meteor RAW Collection

Client

```js
Meteor.call('test3', 10, 100000)
```

Server

```js
I20200925-15:44:02.448(8)? benchmark "test3": repeat=10
I20200925-15:44:03.800(8)? loop 0 finished in 1352.0699610710144ms
I20200925-15:44:05.263(8)? loop 1 finished in 1462.1287961006165ms
I20200925-15:44:06.907(8)? loop 2 finished in 1636.5141220092773ms
I20200925-15:44:08.449(8)? loop 3 finished in 1540.8465340137482ms
I20200925-15:44:09.699(8)? loop 4 finished in 1249.738333940506ms
I20200925-15:44:10.941(8)? loop 5 finished in 1240.5490319728851ms
I20200925-15:44:12.281(8)? loop 6 finished in 1340.2426429986954ms
I20200925-15:44:13.819(8)? loop 7 finished in 1537.786938905716ms
I20200925-15:44:14.990(8)? loop 8 finished in 1170.7018280029297ms
I20200925-15:44:16.206(8)? loop 9 finished in 1215.8398360013962ms
I20200925-15:44:16.207(8)? test3 all done
I20200925-15:44:16.207(8)? {
I20200925-15:44:16.208(8)?   count: 10,
I20200925-15:44:16.208(8)?   max: 1636.5141220092773,
I20200925-15:44:16.208(8)?   min: 1170.7018280029297,
I20200925-15:44:16.209(8)?   average: 1367.4002593755722
I20200925-15:44:16.209(8)? }
```
